{
  "ignition": {
    "version": "2.0.0"
  },
  "systemd": {
    "units": [
      {
        "name": "installer.service",
        "enable": true,
        "contents": "[Unit]\nRequires=network-online.target\nAfter=network-online.target\n[Service]\nType=simple\nExecStart=/usr/bin/sh /var/lib/blacksmith/installer.sh\nRestart=always\n[Install]\nWantedBy=multi-user.target\n"
      }
    ]
  },
  "storage": {
    "filesystems": [{
      "mount": {
        "device": "/dev/sda",
        "format": "xfs",
        "create": {
          "force": true,
          "options": [ "-L", "ROOT" ]
        }
      }
    }],
    "files": [
      {
        "path": "/var/lib/blacksmith/installer.sh",
        "filesystem": "root",
        "mode": 508,
        "user": {
            "id": 0
        },
        "group": {
            "id": 0
        },
        "contents": { "source": "data:text/plain;base64,<< b64template "installer.sh" >>" }
      }
    ]
  }
}